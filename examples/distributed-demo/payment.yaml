# Payment Component - Process 2
# This component runs in a SEPARATE process and receives events from OrderComponent via Redis

name: PaymentComponent
version: 1.0.0
metadata:
  description: Payment processing system (distributed process 2)

stateMachines:
  - name: Payment
    initialState: Pending
    contextSchema:
      orderId:
        type: text
        label: Order ID
        required: true
      amount:
        type: number
        label: Amount
        required: true
      customerId:
        type: text
        label: Customer ID
        required: true

    states:
      - name: Pending
        type: entry
        description: Payment awaiting processing (receives PROCESS from OrderComponent)

      - name: Processing
        type: regular
        description: Payment being processed

      - name: Completed
        type: final
        description: Payment completed successfully

      - name: Failed
        type: error
        description: Payment failed

    transitions:
      - from: Pending
        to: Processing
        event: PROCESS
        type: triggerable
        description: Start payment processing (triggered by OrderComponent via Redis)

      - from: Processing
        to: Completed
        event: CONFIRM
        type: triggerable
        description: Confirm payment success

      - from: Processing
        to: Failed
        event: FAIL
        type: triggerable
        description: Mark payment as failed
